# Отчет по лабораторной работе №8

**Выполнил:** Стажков Данила, группа ИВТ 2-1
**Тема:**  Программирование на python (MVC, SQLite, Jinja2)

---

### 1. Цель работы
Нужно было написать свое веб-приложение для управления списком валют. Главная задача — реализовать CRUD (создание, чтение, обновление, удаление данных) и разобраться, как работает архитектура MVC на практике. Использовал базу данных SQLite в оперативной памяти.

### 2. Что использовал
Писал на чистом Python, без тяжелых фреймворков вроде Django.
*   **http.server** — чтобы запустить локальный сервер.
*   **SQLite (:memory:)** — база данных. Хранится в памяти, чтобы при каждом перезапуске была чистая система.
*   **Jinja2** — чтобы удобно вставлять данные из Python прямо в HTML-код.
*   **Unittest + Mock** — для тестов.

### 3. Как устроена база данных
Сделал простую схему из трех таблиц:
1.  `user` — пользователи.
2.  `currency` — сами валюты (код, название, номинал, курс).
3.  `user_currency` — таблица для связи (кто на какую валюту подписан).

**Про ключи:**
Использовал `PRIMARY KEY` (id), чтобы у каждой записи был уникальный номер.
`FOREIGN KEY` (внешний ключ) нужен, чтобы связывать таблицы между собой. Например, чтобы нельзя было создать подписку на несуществующего пользователя.

### 4. Структура проекта (MVC)
Чтобы код не сваливать в одну кучу, разбил его на папки по принципу MVC:
*   `models/` — тут описываю, как выглядит объект "Валюта".
*   `controllers/` — здесь вся логика. Один контроллер общается с базой данных (пишет SQL-запросы), другой управляет валютами.
*   `templates/` — тут лежат HTML-файлы.
*   `myapp.py` — главный файл, который запускает сервер и распределяет запросы (роутер).

### 5. Реализация CRUD
Все запросы к базе писал через SQL.
*   **Create:** При старте программы скрипт подтягивает реальные курсы с сайта ЦБ РФ и сохраняет их в базу.
*   **Read:** На странице `/currencies` вывожу таблицу всех валют.
*   **Update:** Сделал возможность менять курс валюты (через GET-запрос).
*   **Delete:** Можно удалить валюту по кнопке.

*Важный момент:* во всех запросах использовал знаки вопроса `?` (параметризованные запросы), чтобы защититься от SQL-инъекций.

### 6. Тестирование
Написал Unit-тест для проверки контроллера. Использовал `mock` (заглушку), чтобы при тесте не лезть в реальную базу данных, а сымитировать её ответ. Это позволяет проверить, правильно ли работает сама логика кода.

### 7. Вывод
В ходе работы сделал полноценное приложение. Разобрался, как вручную обрабатывать HTTP-запросы, как связывать Python и HTML через Jinja2 и как правильно работать с базой данных SQLite.
